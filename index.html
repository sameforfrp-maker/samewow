<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ثبت کار و هزینه‌ها</title>
<style>
  body{margin:0;font-family:sans-serif;background:#0f1724;color:#e6eef8;display:flex;flex-direction:column;align-items:center;padding:20px}
  h1{text-align:center;color:#ff6b6b;margin-bottom:20px}
  form{width:90%;max-width:700px;background:#1e293b;padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.3);display:flex;flex-direction:column;gap:10px}
  select,input{padding:8px;border-radius:10px;border:none;font-size:16px;width:100%;box-sizing:border-box}
  button{padding:10px;border-radius:10px;border:none;cursor:pointer;font-weight:600;color:#07101a;background:linear-gradient(90deg,#ff3b3b,#ff6b6b)}
  table{margin-top:20px;width:90%;max-width:700px;border-collapse:collapse}
  th,td{padding:8px;border-radius:6px;text-align:center}
  th{background:#ff3b3b;color:#07101a}
  td{background:#1e293b}
  .total{margin-top:12px;font-weight:bold;text-align:right;width:90%;max-width:700px}
</style>
</head>
<body>
<h1>ثبت کار و هزینه‌ها</h1>
<form id="workForm">
  <label>تاریخ:</label>
  <input type="date" id="date" required>
  <label>نوع کار:</label>
  <select id="workType" required>
    <option value="FRP">FRP</option>
    <option value="قفل">قفل</option>
    <option value="برنامه">برنامه</option>
  </select>
  <label>تعداد/مدت (ساعت یا واحد):</label>
  <input type="number" id="amount" min="0" step="0.1" required>
  <label>هزینه همکار (برای محاسبه خودکار):</label>
  <input type="number" id="rate" min="0" step="0.1" required>
  <button type="submit">ثبت کار</button>
</form>
<table id="workTable">
  <thead><tr><th>تاریخ</th><th>نوع کار</th><th>تعداد</th><th>هزینه همکار</th><th>کل هزینه</th></tr></thead>
  <tbody></tbody>
</table>
<div class="total">جمع کل: <span id="totalCost">0</span></div>
<script>
const workForm = document.getElementById('workForm');
const workTable = document.getElementById('workTable').querySelector('tbody');
const totalCostEl = document.getElementById('totalCost');
let workData = JSON.parse(localStorage.getItem('workData')) || [];

function renderTable(){
  workTable.innerHTML='';
  let total = 0;
  workData.forEach(item=>{
    const tr = document.createElement('tr');
    const cost = item.amount * item.rate;
    total += cost;
    tr.innerHTML=`<td>${item.date}</td><td>${item.type}</td><td>${item.amount}</td><td>${item.rate}</td><td>${cost.toFixed(2)}</td>`;
    workTable.appendChild(tr);
  });
  totalCostEl.innerText = total.toFixed(2);
}

workForm.addEventListener('submit', e=>{
  e.preventDefault();
  const date = document.getElementById('date').value;
  const type = document.getElementById('workType').value;
  const amount = parseFloat(document.getElementById('amount').value);
  const rate = parseFloat(document.getElementById('rate').value);
  workData.push({date,type,amount,rate});
  localStorage.setItem('workData', JSON.stringify(workData));
  renderTable();
  workForm.reset();
  document.getElementById('date').valueAsDate = new Date();
});

// مقدار پیش‌فرض تاریخ امروز
document.getElementById('date').valueAsDate = new Date();
renderTable();
</script>
</body>
</html>
